<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Crear Puntos de Venta - 8Eleven</title>
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
</head>

<body id="page-top">
    <div id="wrapper">

        <!-- Barra Lateral (Sidebar) -->
        <div id="sidebar"></div>

        <!-- Contenido de la página -->
        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">

                <!-- Barra de Navegación Superior -->
                <div id="topbar"></div>

                <div class="container w-50">

                    <!-- Page Heading -->
                    <h1 class="h3 mb-2 text-gray-800">Crear Puntos de Venta</h1>

                    <!-- Formulario de Creación de Puntos de Venta -->
                    <div class="card shadow mb-4">
                        <div class="card-body">
                            <form onsubmit="guardarPuntoVenta(); return false;">
                                <div class="mb-3">
                                    <label for="pais" class="form-label">País</label>
                                    <input type="text" class="form-control" id="pais" placeholder="Ingrese el país" required>
                                </div>
                                <div class="mb-3">
                                    <label for="estado" class="form-label">Estado</label>
                                    <input type="text" class="form-control" id="estado" placeholder="Ingrese el estado" required>
                                </div>
                                <div class="mb-3">
                                    <label for="municipio" class="form-label">Municipio</label>
                                    <input type="text" class="form-control" id="municipio" placeholder="Ingrese el municipio" required>
                                </div>
                                <div class="mb-3">
                                    <label for="cp" class="form-label">Código Postal (C.P)</label>
                                    <input type="text" class="form-control" id="cp" placeholder="Ingrese el código postal" required>
                                </div>
                                <div class="mb-3">
                                    <label for="nombre" class="form-label">Nombre del Punto de Venta</label>
                                    <input type="text" class="form-control" id="nombre" placeholder="Ingrese el nombre del punto de venta" required>
                                </div>
                                <div class="mb-3">
                                    <label for="zona" class="form-label">Zona</label>
                                    <input type="text" class="form-control" id="zona" placeholder="Ingrese la zona" required>
                                </div>
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-6">
                                            <button type="submit" class="btn btn-sm btn-danger">Cancelar</button>
                                        </div>
                                        <div class="col-6 text-end">
                                            <button type="button" class="btn btn-sm btn-primary" onclick="guardarPuntoVenta()">Crear punto de venta</button>                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                </div>

            </div>
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Your Website 2021</span>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // Función para cargar dinámicamente el contenido de la barra lateral
        fetch('sidebar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('sidebar').innerHTML = data;
            });

        // Función para cargar dinámicamente el contenido de la barra de navegación superior
        fetch('topbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('topbar').innerHTML = data;
            });

            function guardarPuntoVenta() {
                console.log('guardarPuntoVenta');
            const formData = {
                pais: document.getElementById('pais').value,
                estado: document.getElementById('estado').value,
                municipio: document.getElementById('municipio').value,
                cp: document.getElementById('cp').value,
                nombre: document.getElementById('nombre').value,
                zona: document.getElementById('zona').value
            };

            fetch('https://8eleven.glitch.me/puntosVentasRoutes/guardar-punto-venta', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log(data);
                alert('Punto de venta creado exitosamente');
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al crear el punto de venta');
            });
        }
    </script>
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="js/sb-admin-2.min.js"></script>
</body>
</html>
